#include<iostream>
#include<algorithm>
#include<climits>
#include<vector>
#include<string>
using namespace std;
int main(){
    int rows;
int cols; 
cin>>rows>>cols;

vector<vector<int>> matrix(rows,vector<int>(cols));
for(int i=0; i<rows;i++){
    for(int j=0; j<cols;j++){
        cin>>matrix[i][j];
    }
}

vector<int> rotating;
int startingrow=0;
int startingcols=0;
int endingcols=cols-1;
int endingrow=rows-1;

for(int i=startingcols;i<=endingcols;i++){
    rotating.push_back(matrix[startingrow][i]);
}
startingrow++;
for(int i=startingrow;i<=endingrow;i++){
    rotating.push_back(matrix[i][endingcols]);
}
endingcols--;
for(int i=endingcols;i>=startingcols;i--){
    rotating.push_back(matrix[endingrow][i]);
}
endingrow--;
for(int i=endingrow;i>=startingrow;i--){
    rotating.push_back(matrix[i][startingcols]);
}           
for(int i =0; i<rotating.size();i++){
    cout<<rotating[i]<<" ";
}
cout<<endl;

for(int i=0;i<=cols-2;i++){
        int k=rotating.size()-1;
        int x = rotating[k];
        k--;
        for(;k>=0;k--){
 rotating[k+1]=rotating[k];
        }
        rotating[0]=x;
        for(int i =0; i<rotating.size();i++){
    cout<<rotating[i]<<" ";
}
cout<<endl;
    }
// for(int i =0; i<rotating.size();i++){
//     cout<<rotating[i]<<" ";
// }
cout<<endl;
startingrow=0;
 startingcols=0;
endingcols=cols-1;
endingrow=rows-1;
int index=0;
for(int i=startingcols;i<=endingcols;i++){
    matrix[startingrow][i]=rotating[index];
    index++;
}
startingrow++;
for(int i=startingrow;i<=endingrow;i++){
    matrix[i][endingcols]=rotating[index];
    index++;
}
endingcols--;
for(int i=endingcols;i>=startingcols;i--){
    matrix[endingrow][i]=rotating[index];
    index++;
}
endingrow--;
for(int i=endingrow;i>=startingrow;i--){
    matrix[i][startingcols]=rotating[index];
    index++;
}
for(int i =0;i<rows;i++){
    for(int j =0; j<cols;j++){
cout<<matrix[i][j]<<" ";
    }
    cout<<endl;
}
}
